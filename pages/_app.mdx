import { MotionConfig } from 'framer-motion';
import { NodeReleasesDataProvider } from '../providers/nodeReleasesDataProvider';
import { LocaleProvider } from '../providers/localeProvider';
import { SiteProvider } from '../providers/siteProvider';
import sourceSansPro from '../util/sourceSansPro';
import { useNodeReleasesDataApi } from '../hooks/useNodeReleasesDataApi';

import '../styles/old/index.scss';

export default function App({ Component, pageProps }) {
  const nodeReleasesData = useNodeReleasesDataApi();

  return (
    <SiteProvider>
      <LocaleProvider i18nData={pageProps.i18nData}>
        <NodeReleasesDataProvider nodeReleasesData={nodeReleasesData}>
          <MotionConfig reducedMotion="user">
            {/* @TODO: This is a temporary solution. We might want to adopt Emotion/StyledComponents here */}
            <style jsx global>
              {`
                body {
                  font: 400 20px/1.5 ${sourceSansPro.style.fontFamily}, 'Open Sans',
                    Roboto, 'San Francisco', Helvetica, Arial, sans-serif;
                }
              `}
            </style>
            <Component {...pageProps} />
          </MotionConfig>
        </NodeReleasesDataProvider>
      </LocaleProvider>
    </SiteProvider>
  );
}
