---
title: изчистване на грешки - първи стъпки
layout: docs.hbs
---

# Ръководство За Отстраняване На Грешки

Това ръководство ще ви помогне да започнете отстраняване на грешки узла.јѕ приложения и скриптове.

## Включват Инспектор

При стартиране на с** --инспектира * * преминаването на възел.процесът на JS слуша чрез WebSockets
за диагностика на определени команди протокол [Inspector][],
по подразбиране в сайта и Порто 127.0.0.1: 9229. Всеки процес също се дава
уникален идентификатор на UUID][] (например, `0f2c936f-b1cd-4ac9-aab3-f63b0f33d55e`).

Клиентите инспектор трябва да знае и да посочи адрес на хоста, порт, и UUID за свързване
към интерфейса на WebSocket. Пълният URL адрес
`с WS://127.0.0.1:9229/0f2c936f-b1cd-4ac9-aab3-f63b0f33d55e, разбира се, зависи
на самия Хост и Порт и е с правилна UUID за съд.

Инспектор включва и крайната точка на HTTP за обслужване на метаданни за отлаживаемом обекта,
включително URL-адрес на WebSocket, UUID и URL адрес, Chrome DevTools. Вземи тези метаданни
с изпращане на HTTP заявка във ' http://[host: port] / json / list`. Това връща
JSON обект, както следва: използване на webSocketDebuggerUrl` имот, както
URL за да се свържете директно инспектор.

<!-- eslint-напред -->
``яваскрипт
{
"описание": "възел.копие на js",
 "devtoolsFrontendUrl": "хром инструменти за разработчици://инструменти за разработчици/комплект/инспектор.HTML кода?експерименти=истината&v8only=истината и WS=127.0.0.1:9229/0f2c936f-b1cd-4ac9-aab3-f63b0f33d55e",
"faviconUrl": "https://nodejs.org/static/favicon.ico",
"id": "0f2c936f-b1cd-4ac9-aab3-f63b0f33d55e",
"име": "възел",
"вид": "възел",
"адрес": "file://",
"webSocketDebuggerUrl": "с WS://127.0.0.1:9229/0f2c936f-b1cd-4ac9-aab3-f63b0f33d55e"
}
`

възел.процесът на JS начало *без* `--проверка може да бъдат инструктирани да започне
слушането на отладочных съобщения чрез аларма SIGUSR1 (Linux и
OS X). С възел 7 това ще активира не се ползва API, за изчистване на грешки; в възел 8 и по-късно
той активира API инспектор.

---
## последици за сигурността

Тъй като дебъгер има пълен достъп до хост.сряда изпълнението на js a
нападателят, който е в състояние да се свърже към този порт, може да изпълни произволен
код от името на процеса възел. Важно е да се разбере, сигурност
последствия за предоставяне на пристанището за изчистване на грешки в публични и частни мрежи.

### Публичен достъп до порто отстраняване на грешки опасно

Ако дебъгер, прикрепена към IP-адрес, или 0.0.0.0, клиенти,
смогите достигне вашият IP-адрес ще се свърже с отладчику без всякакви
ограничаване и възможността за стартиране на произволен код.

По подразбиране `node --инспектира ' прилепва към 127.0.0.1. Трябва изрично да предоставят
публичен IP адрес 0.0.0.0 и т.н., ако са предвидени за разрешаване на външно свързване
до отладчику. Това може да доведе до потенциално голяма сигурност
заплаха. Ние ви препоръчваме да предостави съответните защитни стени и средства за контрол на достъпа
за да се предотврати заплаха за сигурността.

См. секция "[включването на сценарии отдалечено изчистване на грешки] (#enabling-remote-debugging-scenaries) " някои съвети за това, как
за успешното разрешаване на клиенти отдалечен дебъгер за връзка.

### Локални приложения имат пълен достъп до инспектор

Дори ако привязываете порт инспектор към 127.0.0.1 (по подразбиране), всички приложения
стартирането на локално на вашия компютър ще имат неограничен достъп. Това е
за да се гарантира, че местните отладчики, за да има възможност за удобно закрепване.

### Браузъри, WebSockets и политика с еднакъв произход

Уеб сайтове, открити в web-браузъра, могат да направят WebSocket и HTTP заявки под
модел на сигурност на браузъра. За получаване на първоначалното HTTP връзка трябва да
уникален идентификатор на сесия на дебъгера. Политика с еднакъв произход, не дава възможност на уеб сайтовете да бъдат
възможност да се направи връзка по HTTP. За допълнителна сигурност срещу
[DNS перепривязки атаки](https://en.wikipedia.org/wiki/DNS_rebinding), узел.јѕ
проверява, че заглавията 'Host' за свързване, или
просто изберете IP адрес или `localhost` или `localhost6`.

Тези на политиката за сигурност забраняват свързване към отдалечен сървър и отстраняване на грешки
индикация на името на хоста. Това ограничение може да се заобиколи, като се посочва
или IP адрес или с помощта на тунел на ssh, както е описано по-долу.

## Клиенти Инспектор

До инспектор на възел можете да свържете няколко търговски инструменти и инструменти с отворен код. Основна
информация за това по-долу:

#### [node-инспектира](https://github.com/nodejs/node-inspect)

* Дебъгер CLI, поддържан узлом.ЈЅ Фондацията, която използва [протокол инспектор][].
* Версия идва с Възел и може да се използва с `node инспектира myscript.js.
* Най-новата версия можете също така да зададете на себе си (например, `npm install-g node-инспектира`)
и се използва с ' node-inspect myscript.js.

#### [Chrome DevTools](https://github.com/ChromeDevTools/devtools-frontend) 55+

* * * * Вариант 1**: да се Отвори " chrome: / / инспектира` в хром основа
браузъра. Щракнете върху персонализиране и се уверете, че хост и порт
изброени.
* **Вариант 2**: да копирате `devtoolsFrontendUrl` изход `/JSON/списък`
(виж по-горе), или-да се провери намек текст и го поставете в Хром.
* * * * Опция 3**: Инсталиране на разширение на Chrome NIM (Node Inspector Manager): 
https://chrome.google.com/webstore/detail/nim-node-inspector-manage/gnhhdgbaldcilmgcpfddgdbkhjohddkj

#### [Visual Studio Code](https://github.com/microsoft/vscode) 1.10+

* В лентата за отстраняване на грешки щракнете върху иконата настройки, за да отворите `.vscode / стартиране.формат JSON.`
избрани узел.јѕ " за първоначална настройка.

#### [Visual Studio](https://github.com/Microsoft/nodejstools) 2017

* Изберете "изчистване на грешки на > започне съобщенията за изчистване на грешки" в менюто, или натиснете F5.
* [Подробна инструкция](https://github.com/Microsoft/nodejstools/wiki/Debugging).

#### [Компания JetBrains WebStorm](https://www.jetbrains.com/webstorm/) 2017.1+ и други компании JetBrains Эйдос

* Създаване на нов узел.ЈЅ отлаживает конфигурация и кликне Debug. `--проверка ще се използва
 по подразбиране за узла.јѕ 7+. За да изключите махнете отметката на ' js.дебъгер.възел.използвате.провери в
регистър на IDE.

#### [chrome remote-interface](https://github.com/cyrus-and/chrome-remote-interface)

* Библиотека за опростяване на свързване на крайните точки на протокола инспектор.

---

## Опция от командния ред

В следващата таблица са изброени влиянието на различни знамена среда за изпълнение на съобщенията за изчистване на грешки:

елементи <table cellpadding="0" cellspacing="0">
<tr><ти>флаг</th><th>смисъл</mz></tr>
<tr>
<td>--инспектира</ТD>
<TD>
<ul>
<Li>включете инспектор представител</литиево>
< li>прослушване на адреса и порта по подразбиране (127.0.0.1:9229)< / li>
 < / ul>
</TD>
< / tr>
<tr>
<td>--да проверите=<>[сървър:порт]</i></ТD>
<TD>
<ul>
<Li>включете инспектор представител</литиево>
< li>обвързващата до адрес или име на хост < i>хост< / i> (по подразбиране: 127.0.0.1)< / li>
<литиево>порт <i>порт</i> (по подразбиране: 9229)</литиево>
< / ul>
</TD>
< / tr>
<tr>
<td>--да проверите-БРК</ТD>
<TD>
<ul>
<Li>включете инспектор представител</литиево>
< li>прослушване на адреса и порта по подразбиране (127.0.0.1:9229)< / li>
< li>почивка преди старта на потребителски код.< / li>
< / ul>
</TD>
< / tr>
<tr>
<td>--да проверите-БРК=<>[сървър:порт]</i></ТD>
<TD>
<ul>
<Li>включете инспектор представител</литиево>
< li>обвързващата до адрес или име на хост < i>хост< / i> (по подразбиране: 127.0.0.1)< / li>
<литиево>порт <i>порт</i> (по подразбиране: 9229)</литиево>
< li>почивка преди старта на потребителски код.< / li>
< / ul>
</TD>
< / tr>
<tr>
<td><code>node инспектира < I>скрипт.јѕ</i> < / code>< / td>
<TD>
<ul>
< li>създава дъщерен процес, за да стартирате скрипт потребителя под флага --инспектира;
и използвайте основният процес за изпълнение на дебъгер CLI.</ли>
< / ul>
</TD>
< / tr>
<tr>
<td> < code>node инспектира --port=xxxx < i>скрипт.јѕ</i> < / code>< / td>
<TD>
<ul>
< li>създава дъщерен процес, за да стартирате скрипт потребителя под флага --инспектира;
и използвайте основният процес за изпълнение на дебъгер CLI.</ли>
<литиево>порт <i>порт</i> (по подразбиране: 9229)</литиево>
< / ul>
</TD>
< / tr>
</таблица>

---

## Включване на сценарии отдалечено изчистване на грешки

Не се препоръчва да дебъгер прослушивал публичен IP-адрес. Ако
трябва да дадете на отдалечено отстраняване на връзки, ви препоръчваме да използвате ssh
вместо това тунели. Представяме следния пример само с илюстративна цел.
Обърнете внимание на рисковете за сигурността, свързани с отдалечен достъп стои
сервиз преди да продължите.

Да кажем, вие преминавате Node на отдалечената машина, remote.example.com, че ти си
искате да имате възможност за отстраняване на грешки. На тази машина трябва да се стартира процеса на възел
при този инспектор слуша само localhost (по подразбиране).

``победи
$ node --инспектира сервер.јѕ
`

Сега на локалния компютър, от който искате да изпълните клиент отстраняване на грешки
за свързване, можете да настроите SSH тунел:

``победи
$ ssh-L 9221: localhost: 9229 user@remote.example.com
`

Това стартира сесия тунел на ssh, където връзката с пристанище 9221 на локалния
машината ще бъде предадена до пристанището 9229 напред remote.example.com. Сега можете да прикачите
дебъгер, като Chrome DevTools или Visual Studio Code to localhost: 9221,
който трябва да бъде в състояние да развенчава, сякаш възел.приложение js работи на местно ниво.

---

## Да Не Се Ползва За Отстраняване На Грешки

** Да не се ползва за отстраняване на грешки е остарял с възел 7.7.0. Моля използвайте-проверка на
а вместо него инспектор.**

При стартиране с ключове** --debug **или** --debug-brk * * във версия 7 и
по-рано узел.јѕ слуша екип за отстраняване на грешки, някои изоставена
Протокол за отстраняване на грешки V8 на TCP порт, по подразбиране е '5858'. Всеки клиент с дебъгер
какво ни казва този протокол може да се свърже с и отлаживаться върви процес; 
няколко популярни от тях са изброени по-долу.

Протокол за отстраняване на грешки V8 вече не се поддържа и не се документира.

#### [Вграден дебъгер](https://nodejs.org/dist/latest-v6.x/docs/api/debugger.html)

Стартирайте 'имя_скрипта отстраняване на грешки узла.јѕ' за да стартирате скрипта под Node's стартиращ модул
дебъгер командния ред. Скрипт се стартира в друг процес възел, пренебрегвани с
опция "--debug-brk`, и процес на първоначално възел стартира ' _debugger.js`
сценарий и се свързва към вашата цел.

#### [Node-инспектор](https://github.com/node-inspector/node-inspector)

Отстраняване на грешки узла.јѕ app с Chrome DevTools с помощта на мидълуер процес
който преобразува протокол инспектор, използван в Chromium, в дебъгер V8
протокол, използван в узле.јѕ.

<!-- refs -->

[Протокол инспектор]: https://chromedevtools.github.io/debugger-protocol-viewer/v8/
[UUID]: https://tools.ietf.org/html/rfc4122
