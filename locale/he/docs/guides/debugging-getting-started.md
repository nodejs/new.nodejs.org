---
כותרת: ניפוי באגים-מתחיל
סידור: מסמכים.hbs
---

# debugging guide

מדריך זה יעזור לך להתחיל ניפוי באגים הצומת שלך.אפליקציות js ותסריטים.

# אפשר מפקח

כאשר התחיל עם * * -- לבדוק * * לעבור, צומת.comment
עבור פקודות אבחון כפי שהוגדרו על ידי פרוטוקול [המפקח][],
על פי ברירת המחדל של מארח ושמאל 127.0.0.1: 929. כל תהליך מוקצה גם הוא
ייחודי [uuid] [] (e.g. `0f2c936f-b1cd-4ac9-aab3-f63b03d55e').

הלקוחות המפקחים חייבים לדעת ולציין כתובת מארח, יציאה ויואיד כדי להתחבר
לממשק רשת האינטרנט. הכתובת המלאה היא
"ws:/ / 127.0.1: 9229/0f2c936f-b1cd-4ac9-aab3-f63b03d55e", כמובן תלוי
על מארח בפועל ונמל ועם uuid הנכון למשל.

מפקח כולל גם http endpoint לשרת metadata על debuggee,
כולל כתובת url, uuid, ו-chrome devtools. קבל מידע-נוסף
על ידי שליחת בקשת http אל "http://[host:port]/json/list".  זה חוזר
אובייקט json כמו הבא; השתמש ב` websocketdebuggerral ' רכוש כ
כתובת להתחבר ישירות למפקח.

<!--eslint-skip -->
"'javascript
{
  "תיאור": "צומת.מופע של js",
  "devtoolsfrontendurl": "chrome-devtools://devtools/bundled/inspector.html?ניסויים = true&v8only=true&ws=127.0.1: 929/0f2c936f-b1cd-4ac9-aab3-f63b03d55e",
  "faviconurl": "https://nodejs.org/static/favicon.ico",
  "id": "0f2c936f-b1cd-4ac9-aab3-f63b033d55e",
  "כותרת": "צומת",
  "סוג":",
  "כתובת": "קובץ"://",
  websocketdebuggerurl: ws:/ / 127.0.1: 929/029 / 02c936f-b1cd-4ac9-aab3-f65553b0f33de"
}
"`

צומת.תהליך js החל * ללא* -- לבדוק ' יכול גם להיות הורה להתחיל
האזנה לניפוי באגים הודעות על ידי איתות זה עם 'sigusr1' (בלינוקס ו
os x). = = = node 7 = = = מערכת ההפעלה מפעילה את api מנפה השגיאות של legacy; בצומת 8 ומאוחר יותר
זה יפעיל את המפקח api.

---
#"השלכות אבטחה

מאז יש מנפה באגים גישה מלאה לצומת.סביבת הוצאה להורג של ג ' יי. אס.
שחקן זדוני המסוגל להתחבר לנמל זה יכול להיות מסוגל לבצע שרירותי
קוד בשם תהליך הצומת. חשוב להבין את האבטחה.
השלכות על חשיפת נמל מנפה השגיאות ברשתות ציבוריות ופרטיות.

##"חשיפת נמל הדיבוג בפומבי אינה בטוחה

אם מנפה השגיאות קשור לכתובת ה-ip הציבורית, או ל-0.0.0.0, כל לקוח ש
יכול להגיע לכתובת ה-ip שלך תוכל להתחבר אל debugger ללא כל
הגבלה ותוכל להפעיל קוד שרירותי.

כברירת מחדל, "בדוק" נקשר ל-127.0.1. אתה במפורש צריך לספק ... 
כתובת ip ציבורית או 0.0.0.0.0.0 וכו'. אם אתה מתכוון לאפשר חיבורים חיצוניים
לחיי החובט. אם תעשה זאת, זה עלול לחשוף אותך לביטחון משמעותי.
איום. אנחנו מציעים לך להבטיח חומות אש מתאימות ובקרי גישה במקום
כדי למנוע חשיפה ביטחונית.

ראה את הקטע ב - "[מפעיל תרחישי ניפוי מרחוק] (#אפשור-תרחישי ניפוי מרחוק) " על כמה עצות כיצד
כדי לאפשר בבטחה לקוחות מנפה באגים מרחוק להתחבר.

### ליישומים מקומיים יש גישה מלאה למפקח

גם אם תקשור את יציאת המפקח ל-127.0.0.1 (ברירת המחדל), כל יישום שהוא
הפעלה מקומית על המכונה שלך תהיה גישה בלתי מוגבלת. זה בתכנון.
כדי לאפשר debuggers המקומי להיות מסוגל לצרף בנוחות.

### browsers , websockets and same-origin policy

אתרי אינטרנט פתוחים בדפדפן יכולים ליצור בקשות websocket ו-http תחת
מודל אבטחה בדפדפן. name
זיהוי הפעלה ייחודי של מנפה באגים. אותה מדיניות מוצא מונעת מאתרים להיות
מסוגל לעשות חיבור http זה. עבור אבטחה נוספת נגד
[התקפות rebinding dns](https://en.wikipedia.org/wiki/dns_rebinding), node.js
מאמת ש "הכותרות" של המארח לחיבור גם כן
ציין כתובת ip או` localhost `או` localhost6 ' בדיוק.

מדיניות אבטחה זו אינה מאפשרת חיבור לשרת ניפוי באגים מרוחק על ידי
מציין את שם המארח. אתה יכול לעבוד סביב הגבלה זו על ידי ציון
או כתובת ה-ip או על ידי שימוש במנהרות ssh כפי שתואר להלן.

## לקוחות מפקח

מספר כלים מסחריים ופתוח יכולים להתחבר למפקח של צומת. בסיסי
מידע על אלה כדלקמן:

#### [צומת-לבדוק](https://github.com/nodejs/node-inspect)

* clid debugger נתמך על ידי הצומת.js foundation אשר משתמש ב [פרוטוקול המפקח] [].
* גרסה ארוזה עם ממסר, וניתן להשתמש בה עם "בדוק את המיסcript".js'.
* הגרסה העדכנית ביותר יכולה להיות מותקנת באופן עצמאי (למשל `npm install-g node-header`).)
  ובשימוש ב - "בודק הצומת" מיסטריפט.js'.

#### [כרום devtools](https://github.com/chromedevtools/devtools-frontend) 55+

* * אפשרות 1**: open ' chrome:/ / discover` in a chromium-based
  דפדפן. לחץ על כפתור ההגדרות ולהבטיח את מארח היעד שלך ואת היציאה
  רשומים.
* * אפשרות 2**: העתק את 'devtoolsfrontendurl' מתוך הפלט של ' /json/list`
  או ... לבדוק טקסט רמז ולהדביק לכרום.
** אפשרות 3**: התקן את סיומת הכרום nim (מנהל הצומת)):  
  https://chrome.google.com/webstore/detail/nim-node-inspector-manage/gnhhdgbaldcilmgcpfddgdbkhjohddkj

#### [קוד סטודיו חזותי] (https://github.com/microsoft/vscode) 1. 10+

* בלוח הדיבוג, לחץ על סמל ההגדרות לפתיחה.vscode / השקה.ג`ייסון.
  בחר צומת.js " עבור ההתקנה הראשונית.

#### [סטודיו חזותי] (https://github.com/microsoft/nodejstools) 2017

* בחר "debug > התחל ניפוי באגים" מהתפריט או לחץ f5.
* [הוראות מפורטות](https://github.com/microsoft/nodejstools/wiki/debugging).

#### [jetbrains webstorm] https://www.jetbrains.com/webstorm/) 2017.1+ and other jetbrains ides

* צור צומת חדש.הגדרות ניפוי באגים js ולחץ על ניפוי באגים. "לבדוק" ישמש
  כברירת מחדל לצומת.ג ' יי.אס 7+. כדי לבטל uncheck ' js.מנפה באגים.צומת.השתמש.בדוק ' ב
  רישום ide.

#### [כרום-מרחוק ממשק] https://github.com/cyrus-and/chrome-remote-interface)

* library to ease connections to protocol endoints.

---

# אפשרויות שורת פקודה

הטבלה הבאה מפרט את ההשפעה של דגלים בזמן ריצה שונים על ניפוי באגים:

<padding טבלה= " 0 "cellspacing= "0">
  <tr><th>flag</th> < th>משמעותו< / th></tr> < / tr > 
  <tr>
    <td> - בדוק</td>
    <td>
      <ul>
        אפשר סוכן מפקח</li>
        <li>listen on default address and port (127.0.1: 9229)</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td> - ביקורת=<i>[מארח:יציאה]< / i>< / td>
    <td>
      <ul>
        אפשר סוכן מפקח</li>
        < li>bind to address or host name <i>host</i> (default: 127.0.1)< / li>
        <li>listen on port <i>port</i> (default: 9229)</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td> - בדוק-brk</td>
    <td>
      <ul>
        אפשר סוכן מפקח</li>
        <li>listen on default address and port (127.0.1: 9229)</li>
        < li>שבור לפני שקוד המשתמש מתחיל</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td> - בדוק-brk=<i>[host:port]< / i>< / td>
    <td>
      <ul>
        אפשר סוכן מפקח</li>
        < li>bind to address or host name <i>host</i> (default: 127.0.1)< / li>
        <li>listen on port <i>port</i> (default: 9229)</li>
        < li>שבור לפני שקוד המשתמש מתחיל</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td> < cod>הצומת < i>script.< / i>< / code></td>
    <td>
      <ul>
        @ info: whatsthis;
            ולהשתמש בתהליך הראשי כדי להפעיל את מנפה השגיאות.</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td> < code>node review ... port=xxxx <i>script.< / i>< / code></td>
    <td>
      <ul>
        @ info: whatsthis;
            ולהשתמש בתהליך הראשי כדי להפעיל את מנפה השגיאות.</li>
        <li>listen on port <i>port</i> (default: 9229)</li>
      </ul>
    </td>
  </tr>
</table>

---

## enabling remote debugging תרחישים

אנחנו ממליצים שאף פעם לא יהיה לך מנפה השגיאות שיאזין לכתובת איי-פי ציבורית. אם
אתה צריך לאפשר חיבורי ניפוי באגים מרוחקים אנו ממליצים על השימוש ב-ssh
מנהרות במקום. אנו מספקים את הדוגמה הבאה למטרות להמחשה בלבד.
אנא הבן את הסיכון הבטחוני של מאפשר גישה מרחוק לחיסיון
שירות לפני שתמשיך.

בוא נגיד שאתה מפעיל צומת על מכונה מרוחקת, remote.example.com " שאת ... 
רוצה להיות מסוגל debug. על המכונה הזאת, אתה צריך להתחיל את תהליך הצומת
כאשר המפקח מאזין רק ללוקלהוסט (ברירת המחדל).

"באש
 קשר $ - לבדוק שרת.js
"`

עכשיו, על המכונה המקומית שלך מאיפה אתה רוצה ליזום לקוח debug
חיבור, אתה יכול להגדיר מנהרת ssh:

"באש
$ ssh-l 9221: localhost: 9229 user@remote.example.com
"`

name
machine יועבר port 929 on remote.example.com. עכשיו אתה יכול לצרף
מנפה באגים כגון devtools כרום או קוד סטודיו חזותי ללוקוהוסט: 9221,
אשר אמור להיות מסוגל debug כאילו הצומת.היישום js רץ באופן מקומי.

---

## legacy debugger

** מנפה השגיאות של legacy deprecated נכון ל-node 7.7.0. אנא השתמש ב ... בדוק
ומפקח במקום.**

כאשר התחיל עם* --debug* -- או * -- debug-brk ** מתגים בגרסה 7 ו
מוקדם יותר, צומת.js מקשיב לפקודות ניפוי באגים שהוגדרו על ידי הופסקו
פרוטוקול ניפוי באגים v8 על יציאת tcp, כברירת מחדל '5858'. כל לקוח מנפה באגים
אשר מדבר פרוטוקול זה יכול להתחבר ל וdebug תהליך הריצה; a
הזוג הפופולרי מופיע למטה.

פרוטוקול ניפוי באגים v8 כבר לא מתוחזק או מתועד.

#### [מנפה באגים מובנה] https://nodejs.org/dist/latest-v6.x/docs/api/debugger.html)

התחל " צומת ניפוי באגים שם script_.js 'to start your script under node' s building
מנפה באגים של שורת פקודה. התסריט שלך מתחיל בתהליך צומת אחר
`- אפשרות `debug-brk', ותהליך הצומת הראשוני מפעיל את ' bugger.js`
תסריט ומתחבר למטרה שלך.

#### [צומת מפקח] (https://github.com/node-inspector/node-inspector)

ניפוי באגים הקשרית שלך.יישום js עם devtools כרום על ידי שימוש בתהליך ביניים
אשר מתרגם את פרוטוקול המפקח המשמש בchromium למנפה v8
פרוטוקול המשמש צומת.js.

<!-- refs -->

[פרוטוקול מפקח]: https://chromedevtools.github.io/debugger-protocol-viewer/v8/
[uuid]: https://tools.ietf.org/html/rfc4122