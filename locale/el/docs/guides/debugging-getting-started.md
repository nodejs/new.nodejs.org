---
Τίτλος: Debugging-ξεκινώντας
διάταξη: έγγρ.hbs
---

# Οδηγός Εντοπισμού Σφαλμάτων

Αυτός ο οδηγός θα σας βοηθήσει να ξεκινήσετε τον εντοπισμό σφαλμάτων του κόμβου σας.JS εφαρμογές και σενάρια.

## Ενεργοποίηση Επιθεωρητή

Όταν ξεκίνησε με το διακόπτη **--inspect**, ένας κόμβος.JS διαδικασία ακούει μέσω WebSockets
για διαγνωστικές εντολές όπως ορίζονται από το [πρωτόκολλο Επιθεωρητή][],
από προεπιλογή στον κεντρικό υπολογιστή και τη θύρα 127.0.0.1: 9229. Κάθε διαδικασία έχει επίσης εκχωρηθεί ένα
το μοναδικό [UUID][] (π. χ. " 0f2c936f-b1cd-4ac9-aab3-f63b0f33d55e`).

Οι υπολογιστές-πελάτες επιθεωρητή πρέπει να γνωρίζουν και να καθορίζουν διεύθυνση κεντρικού υπολογιστή, θύρα και UUID για να συνδεθείτε
στη διεπαφή WebSocket. Η πλήρης διεύθυνση URL είναι
"για τα μοντέλα ws://127.0.0.1:9229/0f2c936f-b1cd-4ac9-aab3-f63b0f33d55e", φυσικά εξαρτώνται από
στην πραγματική υποδοχής και θύρα και με το σωστό UUID για παράδειγμα.

Επιθεωρητής περιλαμβάνει επίσης ένα τελικό σημείο HTTP για να εξυπηρετήσει μεταδεδομένα σχετικά με το πρόγραμμα εντοπισμού σφαλμάτων,
συμπεριλαμβανομένων WebSocket URL, UUID και Chrome DevTools URL. Λήψη μεταδεδομένων
στέλνοντας μια αίτηση HTTP σε 'http: / / [host: port] / JSON / list'.  Αυτό επιστρέφει ένα
Χρησιμοποιήστε την ιδιότητα` webSocketDebuggerUrl ' ως το
URL για να συνδεθείτε απευθείας με τον επιθεωρητή.

<!-- eslint-skip -->
"'javascript
{
  "περιγραφή": "κόμβος.παράδειγμα js",
  "devtoolsFrontendUrl": "chrome-devtools://devtools/πακέτο/επιθεωρητή.html;πειράματα=true&v8only=true&ws=127.0.0.1:9229/0f2c936f-b1cd-4ac9-aab3-f63b0f33d55e",
  "faviconUrl": "https://nodejs.org/static/favicon.ico",
  "id": "0f2c936f-b1cd-4ac9-aab3-f63b0f33d55e",
  "Τίτλος": "κόμβος",
  "Τύπος": "κόμβος",
  "url": "αρχείο://",
  "webSocketDebuggerUrl": "ws://127.0.0.1:9229/0f2c936f-b1cd-4ac9-aab3-f63b0f33d55e"
}
"`

Ένας Κόμβος.η διαδικασία JS άρχισε* χωρίς * `--επιθεωρήστε ' μπορεί επίσης να καθοδηγηθεί για να αρχίσει
ακούγοντας για τον εντοπισμό σφαλμάτων μηνυμάτων με την σηματοδότηση με ' SIGUSR1 '(σε Linux και
OS X). Από τον κόμβο 7 αυτό ενεργοποιεί το legacy Debugger API; στον κόμβο 8 και νεότερη έκδοση
θα ενεργοποιήσει τον επιθεωρητή API.

---
## Επιπτώσεις Στην Ασφάλεια

Από το πρόγραμμα εντοπισμού σφαλμάτων έχει πλήρη πρόσβαση στον κόμβο.JS περιβάλλον εκτέλεσης, α
κακόβουλος ηθοποιός είναι σε θέση να συνδεθεί σε αυτήν τη θύρα μπορεί να είναι σε θέση να εκτελέσει αυθαίρετη
κωδικός για λογαριασμό της διαδικασίας κόμβου. Είναι σημαντικό να κατανοήσουμε την ασφάλεια
επιπτώσεις της έκθεσης της θύρας αποσφαλματωτή σε δημόσια και ιδιωτικά δίκτυα.

### Η έκθεση της θύρας εντοπισμού σφαλμάτων δημόσια δεν είναι ασφαλής

Εάν το πρόγραμμα εντοπισμού σφαλμάτων είναι συνδεδεμένο σε μια δημόσια διεύθυνση IP ή 0.0.0.0, οι υπολογιστές-πελάτες που
μπορεί να φτάσει τη διεύθυνση IP σας θα είναι σε θέση να συνδεθεί με το πρόγραμμα εντοπισμού σφαλμάτων χωρίς καμία
περιορισμός και θα είναι σε θέση να τρέξει αυθαίρετο κώδικα.

Από προεπιλογή "κόμβος -- επιθεώρηση" δεσμεύει σε 127.0.0.1. Θα πρέπει ρητά να παρέχουν ένα
δημόσια διεύθυνση IP ή 0.0.0.0, κ. λπ., εάν σκοπεύετε να επιτρέψετε τις εξωτερικές συνδέσεις
στον αποσφαλματωτή. Αυτό μπορεί να σας εκθέσει μια δυνητικά σημαντική ασφάλεια
απειλή. Σας προτείνουμε να εξασφαλίσετε κατάλληλα firewalls και χειριστήρια πρόσβασης στη θέση τους
για να αποτραπεί η έκθεση στην ασφάλεια.

Ανατρέξτε στην ενότητα "[Ενεργοποίηση σεναρίων απομακρυσμένης εντοπισμού σφαλμάτων] (#ενεργοποίηση-απομακρυσμένη-εντοπισμού σφαλμάτων-σενάρια) " σε ορισμένες συμβουλές για το πώς
για να επιτρέψετε με ασφάλεια τη σύνδεση απομακρυσμένων προγραμμάτων-πελατών εντοπισμού σφαλμάτων.

### Οι τοπικές εφαρμογές έχουν πλήρη πρόσβαση στον επιθεωρητή

Ακόμα και αν συνδέσετε τη θύρα επιθεωρητή σε 127.0.0.1 (η προεπιλογή), οποιεσδήποτε εφαρμογές
εκτελείται τοπικά στον υπολογιστή σας θα έχουν απεριόριστη πρόσβαση. Αυτό είναι από το σχέδιο
για να επιτρέψετε στους τοπικούς αποσφαλματωτές να είναι σε θέση να συνδεθούν βολικά.

### Browsers, WebSockets και ίδια προέλευση πολιτική

Ιστοσελίδες που ανοίγουν σε ένα web-browser μπορεί να κάνει WebSocket και HTTP αιτήσεις κάτω από το
μοντέλο ασφαλείας του προγράμματος περιήγησης. Μια αρχική σύνδεση HTTP είναι απαραίτητη για να αποκτήσετε ένα
μοναδικό αναγνωριστικό περιόδου λειτουργίας αποσφαλματωτή. Η ίδια-προέλευση-πολιτική εμποδίζει ιστοσελίδες από το να είναι
είναι σε θέση να κάνει αυτή τη σύνδεση HTTP. Για πρόσθετη εγγύηση έναντι
[Επιθέσεις rebinding DNS](https://en.wikipedia.org/wiki/DNS_rebinding), κόμβος.js
επαληθεύει ότι οι κεφαλίδες "κεντρικού υπολογιστή" για τη σύνδεση είτε
προσδιορίστε ακριβώς μια διεύθυνση IP ή "localhost" ή "localhost6".

Αυτές οι πολιτικές ασφαλείας δεν επιτρέπουν τη σύνδεση σε έναν απομακρυσμένο διακομιστή εντοπισμού σφαλμάτων από
καθορισμός του ονόματος κεντρικού υπολογιστή. Μπορείτε να επιλύσετε αυτόν τον περιορισμό καθορίζοντας
είτε τη διεύθυνση IP είτε χρησιμοποιώντας σήραγγες ssh όπως περιγράφεται παρακάτω.

## Επιθεωρητές Πελάτες

Πολλά εμπορικά και εργαλεία ανοιχτού κώδικα μπορούν να συνδεθούν με τον επιθεωρητή του κόμβου. Βασική
πληροφορίες σχετικά με αυτά τα εξής:

#### [κόμβος-επιθεώρηση](https://github.com/nodejs/node-inspect)

* CLI Debugger υποστηρίζεται από τον κόμβο.Ίδρυμα js που χρησιμοποιεί το [πρωτόκολλο Επιθεωρητή] [].
* Μια έκδοση είναι συνδυασμένη με κόμβο και μπορεί να χρησιμοποιηθεί με `κόμβος επιθεωρήσει myscript.js`.
* Η τελευταία έκδοση μπορεί επίσης να εγκατασταθεί ανεξάρτητα (π. χ. " νρμ εγκατάσταση-g κόμβο-επιθεωρήστε`)
  και χρησιμοποιείται με ' node-inspect myscript.js`.

#### [Chrome DevTools](https://github.com/ChromeDevTools/devtools-frontend) 55+

* * * Επιλογή 1**: Ανοίξτε το 'chrome: / / inspect' σε χρώμιο-based
  περιήγησης. Κάντε κλικ στο κουμπί Configure και να διασφαλίσει το στόχο υποδοχής και το λιμάνι
  είναι καταχωρημένα.
* * * Επιλογή 2**: Αντιγράψτε το 'devtoolsFrontendUrl' από την έξοδο του`/json / list'
  (δείτε παραπάνω) ή το --επιθεωρήστε το κείμενο υπόδειξη και επικόλληση στο Chrome.
* * * Επιλογή 3**: Εγκαταστήστε το Chrome επέκταση NIM (Node επιθεωρητής διευθυντής):  
  https://chrome.google.com/webstore/detail/nim-node-inspector-manage/gnhhdgbaldcilmgcpfddgdbkhjohddkj

#### [Visual Studio Code](https://github.com/microsoft/vscode) 1, 10+

* Στον πίνακα εντοπισμού σφαλμάτων, κάντε κλικ στο εικονίδιο ρυθμίσεων για να ανοίξετε `.vscode / εκτόξευση.json".
  Επιλέξτε " Κόμβος.js " για την αρχική ρύθμιση.

#### [Visual Studio](https://github.com/Microsoft/nodejstools) το 2017

* Επιλέξτε "Debug > Start Debugging" από το μενού ή πατήστε F5.
* [Αναλυτικές οδηγίες](https://github.com/Microsoft/nodejstools/wiki/Debugging).

#### [JetBrains WebStorm](https://www.jetbrains.com/webstorm/) 2017.1+ και άλλα IDEs JetBrains

* Δημιουργήστε ένα νέο κόμβο.JS debug διαμόρφωση και να χτυπήσει τον εντοπισμό σφαλμάτων. "--επιθεωρήστε " θα χρησιμοποιηθεί
  από προεπιλογή για κόμβο.js 7+. Για να απενεργοποιήσετε την επιλογή ' js.σφαλμάτων.κόμβος.χρησιμοποιήσετε.επιθεώρηση
  το μητρώο IDE.

#### [χρώμιο-remote-interface](https://github.com/cyrus-and/chrome-remote-interface)

* Βιβλιοθήκη για να διευκολύνει τις συνδέσεις με endpoints πρωτόκολλο Επιθεωρητή.

---

## Επιλογές γραμμής εντολών

Ο παρακάτω πίνακας παραθέτει την επίδραση των διαφόρων σημαιών χρόνου εκτέλεσης στον εντοπισμό σφαλμάτων:

<table cellpadding="0" cellspacing="0">
  <tr> < th>σημαία< / th> < th>έννοια < / th>< / tr>
  < tr>
    < td>--επιθεωρήστε< / td>
    < td>
      < ul>
        < li>Ενεργοποίηση πράκτορα επιθεωρητή< / li>
        < li>ακρόαση στην προεπιλεγμένη διεύθυνση και θύρα (127.0.0.1: 9229) < / li>
      < / ul>
    < / td>
  < / tr>
  < tr>
    <td>--επιθεωρήσει=<i>[host:port]</i></td>
    < td>
      < ul>
        < li>Ενεργοποίηση πράκτορα επιθεωρητή< / li>
        < li>σύνδεση με διεύθυνση ή όνομα κεντρικού υπολογιστή < i>κεντρικού υπολογιστή < / i> (προεπιλογή: 127.0.0.1) < / li>
        < li>ακρόαση στη θύρα<I> θύρα < /i > (προεπιλογή: 9229) < / li>
      < / ul>
    < / td>
  < / tr>
  < tr>
    < td> - επιθεώρηση-brk< / td>
    < td>
      < ul>
        < li>Ενεργοποίηση πράκτορα επιθεωρητή< / li>
        < li>ακρόαση στην προεπιλεγμένη διεύθυνση και θύρα (127.0.0.1: 9229) < / li>
        < li > διακοπή πριν από την εκκίνηση του κώδικα χρήστη< / li>
      < / ul>
    < / td>
  < / tr>
  < tr>
    < td>--inspect-brk= < i > [υποδοχής: λιμάνι] < / i>< / td>
    < td>
      < ul>
        < li>Ενεργοποίηση πράκτορα επιθεωρητή< / li>
        < li>σύνδεση με διεύθυνση ή όνομα κεντρικού υπολογιστή < i>κεντρικού υπολογιστή < / i> (προεπιλογή: 127.0.0.1) < / li>
        < li>ακρόαση στη θύρα<I> θύρα < /i > (προεπιλογή: 9229) < / li>
        < li > διακοπή πριν από την εκκίνηση του κώδικα χρήστη< / li>
      < / ul>
    < / td>
  < / tr>
  < tr>
    <td><code>node inspect < i>script.js < / i> < / code > < / td>
    < td>
      < ul>
        < li>αναπαραγωγή παιδί διαδικασία για να εκτελέσετε το σενάριο του χρήστη κάτω από -- επιθεωρήστε σημαία;
            και χρησιμοποιήστε την κύρια διαδικασία για να εκτελέσετε το πρόγραμμα εντοπισμού σφαλμάτων CLI.< / li>
      < / ul>
    < / td>
  < / tr>
  < tr>
    <td><code>node inspect --port=xxxx < i>script.js < / i> < / code > < / td>
    < td>
      < ul>
        < li>αναπαραγωγή παιδί διαδικασία για να εκτελέσετε το σενάριο του χρήστη κάτω από -- επιθεωρήστε σημαία;
            και χρησιμοποιήστε την κύρια διαδικασία για να εκτελέσετε το πρόγραμμα εντοπισμού σφαλμάτων CLI.< / li>
        < li>ακρόαση στη θύρα<I> θύρα < /i > (προεπιλογή: 9229) < / li>
      < / ul>
    < / td>
  < / tr>
< / πίνακας>

---

## Ενεργοποίηση απομακρυσμένων σεναρίων εντοπισμού σφαλμάτων

Σας συνιστούμε να μην έχετε ποτέ το πρόγραμμα εντοπισμού σφαλμάτων ακρόαση σε μια δημόσια διεύθυνση IP. Αν
πρέπει να επιτρέψετε συνδέσεις απομακρυσμένου εντοπισμού σφαλμάτων συνιστούμε τη χρήση της ssh
σήραγγες αντ ' αυτού. Παρέχουμε το ακόλουθο παράδειγμα μόνο για επεξηγηματικούς σκοπούς.
Παρακαλούμε να κατανοήσετε τον κίνδυνο για την ασφάλεια επιτρέποντας απομακρυσμένη πρόσβαση σε ένα προνομιακό
υπηρεσία πριν προχωρήσετε.

Ας πούμε ότι εκτελείτε κόμβο σε απομακρυσμένο μηχάνημα, remote.example.com, ότι εσύ
θέλετε να είναι σε θέση να debug. Σε αυτό το μηχάνημα, θα πρέπει να ξεκινήσετε τη διαδικασία κόμβου
με τον επιθεωρητή να ακούει μόνο localhost (η προεπιλογή).

```Μπας
 κόμβος $ - επιθεώρηση διακομιστή.js
"`

Τώρα, στον τοπικό σας υπολογιστή από όπου θέλετε να ξεκινήσετε ένα πρόγραμμα-πελάτη εντοπισμού σφαλμάτων
σύνδεση, μπορείτε να ρυθμίσετε μια σήραγγα ssh:

```Μπας
$ ssh -L 9221:localhost:9229 user@remote.example.com
"`

Αυτό ξεκινά μια περίοδο λειτουργίας σήραγγας ssh όπου μια σύνδεση με τη θύρα 9221 στην τοπική σας
η μηχανή θα διαβιβαστεί στη θύρα 9229 στις remote.example.com. Μπορείτε τώρα να επισυνάψετε
ένα πρόγραμμα εντοπισμού σφαλμάτων, όπως το Chrome DevTools ή Visual Studio Κώδικα localhost: 9221,
που θα πρέπει να είναι σε θέση να debug σαν τον κόμβο.η εφαρμογή JS λειτουργούσε τοπικά.

---

## Legacy Debugger

**Το πρόγραμμα εντοπισμού σφαλμάτων legacy έχει αποχαρακτηριστεί από τον κόμβο 7.7.0. Παρακαλώ χρησιμοποιήστε --επιθεωρήστε
και ο επιθεωρητής αντ ' αυτού.**

Όταν ξεκίνησε με την **--debug** ή **--debug-brk** διακόπτες στην έκδοση 7 και
νωρίτερα, κόμβος.JS ακούει για εντολές εντοπισμού σφαλμάτων που ορίζονται από τη διακοπή
Πρωτόκολλο εντοπισμού σφαλμάτων V8 σε μια θύρα TCP, από προεπιλογή `5858'. Οποιοδήποτε πρόγραμμα-πελάτης εντοπισμού σφαλμάτων
το οποίο μιλά αυτό το πρωτόκολλο μπορεί να συνδεθεί και να διορθώσει τη διαδικασία που εκτελείται;
μερικά δημοφιλή αυτά που αναφέρονται παρακάτω.

Το πρωτόκολλο εντοπισμού σφαλμάτων V8 δεν διατηρείται πλέον ή τεκμηριώνεται.

#### [Built-in Debugger](https://nodejs.org/dist/latest-v6.x/docs/api/debugger.html)

Ξεκινήστε ' κόμβος εντοπισμού σφαλμάτων script_name.js ' για να ξεκινήσετε το σενάριό σας κάτω από builtin κόμβου
αποσφαλματωτής γραμμής εντολών. Το σενάριό σας ξεκινά σε μια άλλη διαδικασία κόμβου ξεκίνησε με
η επιλογή` -- debug-brk 'και η αρχική διαδικασία κόμβου εκτελείται το' _debugger.js`
script και συνδέεται με το στόχο σας.

#### [κόμβο-επιθεωρητής](https://github.com/node-inspector/node-inspector)

Αποσφαλμάτωσε τον κόμβο σου.JS app με Chrome DevTools χρησιμοποιώντας μια ενδιάμεση διαδικασία
το οποίο μεταφράζει το πρωτόκολλο Επιθεωρητή που χρησιμοποιείται σε χρώμιο στο V8 αποσφαλματωτή
πρωτόκολλο που χρησιμοποιείται στον κόμβο.js.

<!-- διαιτητές -- >

[Επιθεωρητής Πρωτόκολλο]: https://chromedevtools.github.io/debugger-protocol-viewer/v8/
[UUID]: https://tools.ietf.org/html/rfc4122